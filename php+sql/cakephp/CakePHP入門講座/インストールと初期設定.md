## CakePHPのインストールと初期設定

ターミナルで

```
php -v
phpのバージョン確認

composer -V
コンポーザのバージョン確認
```

migrationsの操作
```
bin/cake migrations rollback

bin/cake migrations migrate

bin/cake migrations seed
```

```
->where(['DATE(created)' => '2020-05-02']) // 日付だけでクエリする方法

dd($posts->toArray()); 変数の確認

betweenの使い方
$posts = $this->Posts->find()
                ->where(function($exp) {
                    return $exp->between('DATE(created)', '2020-01-03', '2020-05-02');
                });

検索数の制限
$posts = $this->Posts->find()
                ->limit(3);

並び替え
$posts = $this->Posts->find()
                ->order(['created' => 'desc']);

動的ファインダー
https://tt-computing.com/cake4-custom-finder
$posts = $this->Posts->findByPublished(true);

検索条件の追加
$posts = $this->Posts->findByPublishedAndTitle(true, 'テスト');
$posts = $this->Posts->findByPublished(true);

h()でエスケープ
autoParagraph()で\nを<br>に変換してくれる
<h3><?= h($post->title) ?></h3>
        <p><?= $post->created ?></p>
        <p><?= $this->Text->autoParagraph(h($post->description)) ?></p>

日付や時間を変換する方法
<?= $post->created->i18nFormat('YYYY年MM月dd日 HH:mm') ?>

リンクの設置
<a href="/posts/view/<?= $post->id ?>" class="button">記事を読む</a>

リンクヘルパーを使った場合
<?= $this->Html->link('記事を読む', [
            'controller' => 'Posts', // コントローラーの指定
            'action' => 'view', // コントローラー内の引数の指定
            $post->id, // view関数は引数に$idが必要なため$postのidを渡す
        ],['class' => 'button']); // cssのクラスを指定
        ?>

同じコントローラーの場合はコントローラーの指定が不要
<?= $this->Html->link('記事を読む', [
            'action' => 'view',
            $post->id,
        ],['class' => 'button']);
        ?>
autoParagraphは自動的にpタグが出力されるので不要
<?= $this->Text->autoParagraph(h($post->description)) ?>

検索項目のページネート
public $paginate = [
        'limit' => 2,
        'order' => [
            'created' => 'desc'
        ]
    ];

$posts = $this->paginate($this->Posts->find());// findメソッドをpaginateの引数に設定
```