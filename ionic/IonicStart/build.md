## アプリとしてビルドしよう
最初にアプリのビルドを体験しましょう。
Ionicでは、プレビュー画面を起動している時は「JIT(Just-In-Time)コンパイル」という処理を行っている。

高速にプレビュー画面を更新することを目的とした処理です。
それに対して、リリース用にビルドするときは「AOT(Ahead-Of-Time)コンパイル」にという処理を行うことにより、

ユーザは快適にアプリを表示することができます。

AOTコンパイルする時は`--prod'というオプションを最後につけます。
これをつけないと、JITコンパイルになるので注意します。

リリース用では--prodをつけよう

### Webアプリとしてビルド
Webで公開する時のビルドコマンドは`ionic build --prod`です。

実行すると、ビルドが始まります。`--prod`は、本番環境用にバンドルを構築するプロダクションビルドを意味しており、プロダクションビルド用の環境変数の取得や、ファイルのminify、AOTコンパイルが行われます。

AOTコンパイルが行われるので、JITコンパイルする`ionic serve`よりも時間がかかります。

```
% ionic build --prod
```

公開ファイルは、`www/`以下に生成されるので、この中身をサーバ上にアップロードするとアプリを公開することができます。

### モバイルアプリとしてビルド
モバイルアプリとしてビルドするために、まず必要なパッケージをインストールします。

プロジェクトフォルダ内で次のコマンドを実行してください。

```
% ionic integrations enable capacitor
```

モバイルアプリのビルドに「Capacitor」というライブラリを利用します。

これはIonic CLIの`integrations`コマンドを設定することができます。

#### ビルドしてiOSアプリとして動かす
iOSアプリとしてビルドするために、まずプロジェクトのプラットフォームにiOSを追加します。

```
% ionic cap add ios
```

`cap`は`capacitor`の省略表記です。実行すると、`ios/`フォルダが作成され、その配下にiOSモバイルアプリとしてビルドするのに必要なファイルが作成されます。

`ionic build --prod`を実行していない状態でこのコマンドを実行すると次のエラーが発生します。

```
> capacitor add ios
[error] Capacitor could not find the web assets directory...
```

その場合は、`ionic build --prod`を実行して、プロジェクトフォルダ内に`www`フォルダが生成されたものを確認してから、再度、`ionic cap add ios`コマンドを実行ください。

完了したら、`ionic cap open ios`コマンドを実行してXcodeを開きます。

